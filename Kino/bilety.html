<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Rezerwacja biletów</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <h1>Rezerwacja biletów</h1>

  <form>
    <label for="month">Miesiąc:</label>
    <select id="month">
      <option value="6" selected>Czerwiec</option>
    </select>

    <label for="day">Dzień:</label>
    <select id="day">
      <option value="5">5 czerwca</option>
      <option value="6">6 czerwca</option>
      <option value="7">7 czerwca</option>
      <option value="8">8 czerwca</option>
      <option value="9">9 czerwca</option>
    </select>

    <label for="movie">Film:</label>
    <select id="movie">
      <!-- Opcje filmów zostaną uzupełnione dynamicznie -->
    </select>

    <label for="time">Godzina:</label>
    <select id="time">
      <!-- Opcje godzin zostaną uzupełnione dynamicznie -->
    </select>

    <label for="hall">Sala:</label>
    <select id="hall">
      <!-- Opcje sal zostaną uzupełnione dynamicznie -->
    </select>

    <div id="seats">
      <!-- Miejsca zostaną wygenerowane dynamicznie -->
    </div>

    <button type="submit" disabled>Zarezerwuj</button>
  </form>

  <footer>
    <p>&copy; 2023 KinoXYZ. Wszelkie prawa zastrzeżone.</p>
  </footer>

  <script>
    // Dane o miejscach w poszczególnych salach
    const seatsData = {
      sala1: [
        ['A1', 'A2', 'A3'],
        ['B1', 'B2', 'B3', 'B4'],
        ['C1', 'C2']
      ],
      sala2: [
        ['A1', 'A2', 'A3', 'A4'],
        ['B1', 'B2', 'B3', 'B4'],
        ['C1', 'C2', 'C3']
      ],
      sala3: [
        ['A1', 'A2', 'A3', 'A4', 'A5'],
        ['B1', 'B2', 'B3', 'B4', 'B5'],
        ['C1', 'C2', 'C3', 'C4']
      ]
    };

    // Dane o filmach w poszczególnych dniach
    const moviesData = {
      '5': [
        { title: 'Film A', time: '15:00', hall: 'sala1' },
        { title: 'Film B', time: '17:30', hall: 'sala2' },
        { title: 'Film C', time: '20:00', hall: 'sala3' }
      ],
      '6': [
        { title: 'Film D', time: '14:00', hall: 'sala1' },
        { title: 'Film E', time: '16:30', hall: 'sala2' },
        { title: 'Film F', time: '19:00', hall: 'sala3' }
      ],
      '7': [
        { title: 'Film G', time: '15:30', hall: 'sala1' },
        { title: 'Film H', time: '18:00', hall: 'sala2' },
        { title: 'Film I', time: '20:30', hall: 'sala3' }
      ],
      '8': [
        { title: 'Film J', time: '16:00', hall: 'sala1' },
        { title: 'Film K', time: '18:30', hall: 'sala2' },
        { title: 'Film L', time: '21:00', hall: 'sala3' }
      ],
      '9': [
        { title: 'Film M', time: '17:00', hall: 'sala1' },
        { title: 'Film N', time: '19:30', hall: 'sala2' },
        { title: 'Film O', time: '22:00', hall: 'sala3' }
      ]
    };

    const monthSelect = document.getElementById('month');
    const daySelect = document.getElementById('day');
    const movieSelect = document.getElementById('movie');
    const timeSelect = document.getElementById('time');
    const hallSelect = document.getElementById('hall');
    const seatsContainer = document.getElementById('seats');
    const submitButton = document.querySelector('button[type="submit"]');

    // Funkcja aktualizująca dostępne opcje filmów na podstawie wybranego dnia
    function updateMoviesOptions() {
      const selectedDay = daySelect.value;
      const moviesForDay = moviesData[selectedDay];

      // Usuń aktualne opcje filmów
      movieSelect.innerHTML = '<option value="" disabled selected>Wybierz</option>';

      // Dodaj nowe opcje filmów
      moviesForDay.forEach(movie => {
        const option = document.createElement('option');
        option.value = movie.title;
        option.textContent = movie.title;
        movieSelect.appendChild(option);
      });

      // Wywołaj funkcję aktualizującą dostępne opcje godzin i sal na podstawie wybranego filmu
      updateTimesAndHallsOptions();
    }

    // Funkcja aktualizująca dostępne opcje godzin i sal na podstawie wybranego filmu
    function updateTimesAndHallsOptions() {
      const selectedDay = daySelect.value;
      const selectedMovie = movieSelect.value;
      const moviesForDay = moviesData[selectedDay];

      // Znajdź wybrany film na podstawie tytułu
      const selectedMovieData = moviesForDay.find(movie => movie.title === selectedMovie);

      // Jeśli wybrano film, uzupełnij opcje godzin i sal na podstawie danych filmu
      if (selectedMovieData) {
        const { time, hall } = selectedMovieData;

        // Usuń aktualne opcje godzin
        timeSelect.innerHTML = '<option value="" disabled selected>Wybierz</option>';

        // Dodaj nową opcję godziny
        const timeOption = document.createElement('option');
        timeOption.value = time;
        timeOption.textContent = time;
        timeSelect.appendChild(timeOption);

        // Usuń aktualne opcje sal
        hallSelect.innerHTML = '<option value="" disabled selected>Wybierz</option>';

        // Dodaj nową opcję sali
        const hallOption = document.createElement('option');
        hallOption.value = hall;
        hallOption.textContent = hall;
        hallSelect.appendChild(hallOption);

        // Wygeneruj miejsca na podstawie wybranej sali
        generateSeats(hall);
      } else {
        // Jeśli nie wybrano filmu, usuń opcje godzin i sal
        timeSelect.innerHTML = '<option value="" disabled selected>Wybierz</option>';
        hallSelect.innerHTML = '<option value="" disabled selected>Wybierz</option>';
        seatsContainer.innerHTML = '';
      }

      // Włącz przycisk Zarezerwuj, jeśli wszystkie pola są wybrane
      submitButton.disabled = !selectedDay || !selectedMovie || !timeSelect.value || !hallSelect.value;
    }

    // Funkcja generująca miejsca na podstawie wybranej sali
    function generateSeats(selectedHall) {
      const seatsDataForHall = seatsData[selectedHall];
      seatsContainer.innerHTML = '';

      seatsDataForHall.forEach(row => {
        const rowContainer = document.createElement('div');
        rowContainer.classList.add('seat-row');

        row.forEach(seat => {
          const seatElement = document.createElement('div');
          seatElement.classList.add('seat');
          seatElement.textContent = seat;
          rowContainer.appendChild(seatElement);
        });

        seatsContainer.appendChild(rowContainer);
      });
    }

    // Funkcja obsługująca zmiany w formularzu
    function handleFormChanges() {
      updateTimesAndHallsOptions();
    }

    // Dodaj nasłuchiwacze zdarzeń dla formularza
    monthSelect.addEventListener('change', handleFormChanges);
    daySelect.addEventListener('change', handleFormChanges);
    movieSelect.addEventListener('change', handleFormChanges);

    // Dodaj nasłuchiwacze zdarzeń dla pola sali (zmiana sali może spowodować zmianę miejsc)
    hallSelect.addEventListener('change', () => {
      const selectedHall = hallSelect.value;
      generateSeats(selectedHall);
    });

    // Dodaj nasłuchiwacze zdarzeń dla miejsc (wybór miejsca może spowodować zmianę dostępności przycisku Zarezerwuj)
    seatsContainer.addEventListener('click', (event) => {
      const selectedSeat = event.target.textContent;
      const isSelected = event.target.classList.contains('selected');

      // Jeśli miejsce jest dostępne, zaznacz je; w przeciwnym razie odznacz je
      if (!isSelected) {
        event.target.classList.add('selected');
      } else {
        event.target.classList.remove('selected');
      }

      // Sprawdź, czy co najmniej jedno miejsce jest zaznaczone i włącz/wyłącz przycisk Zarezerwuj
      const selectedSeats = seatsContainer.getElementsByClassName('selected');
      submitButton.disabled = selectedSeats.length === 0;
    });
  </script>
</body>
</html>
