<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Kino KinoKapePL - Bilety</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header>
    <h1>Kino KapePL</h1>
    <nav>
      <ul>
        <li><a href="index.html">Strona główna</a></li>
        <li><a href="filmy.html">Filmy</a></li>
        <li><a href="repertuar.html">Repertuar</a></li>
        <li><a href="bilety.html">Bilety</a></li>
        <li><a href="kontakt.html">Kontakt</a></li>
      </ul>
    </nav>
  </header>

  <section id="content">
    <h2>Kup bilet</h2>
    <label for="miesiac">Wybierz miesiąc:</label>
    <select id="miesiac" name="miesiac" onchange="generateDayButtons()">
      <option value="6">Czerwiec</option>
      <!-- Dodaj opcje dla innych miesięcy -->
    </select>

    <div id="dni">
      <!-- Tutaj zostaną wstawione przyciski na wybór dnia -->
    </div>

    <form action="kup-bilet.php" method="post">
      <label for="imie">Imię:</label>
      <input type="text" id="imie" name="imie" required>
      <label for="nazwisko">Nazwisko:</label>
      <input type="text" id="nazwisko" name="nazwisko" required>
      <label for="film">Wybierz film:</label>
      <select id="film" name="film" disabled>
        <option value="">Wybierz film</option>
      </select>
      <label for="godzina">Wybierz godzinę:</label>
      <select id="godzina" name="godzina" disabled>
        <option value="">Wybierz godzinę</option>
      </select>
      <label for="sala">Wybierz salę:</label>
      <select id="sala" name="sala" onchange="generateSeats()" disabled>
        <option value="">Wybierz salę</option>
        <option value="sala1">Sala 1</option>
        <option value="sala2">Sala 2</option>
        <option value="sala3">Sala 3</option>
      </select>
      <label for="miejsce">Wybierz miejsce:</label>
      <div id="seat-map">
        <!-- Tutaj zostanie wstawiona siatka miejsc -->
      </div>
      <div id="showtime"></div>
      <input type="hidden" id="selected-seats" name="selected-seats">
      <button type="submit">Kup bilet</button>
    </form>
  </section>

  <script>
    function generateDayButtons() {
      const miesiacSelect = document.getElementById('miesiac');
      const selectedMonth = parseInt(miesiacSelect.value);

      const dniContainer = document.getElementById('dni');
      dniContainer.innerHTML = '';

      const startDay = 5; // Początkowy dzień (5 czerwca)
      const endDay = 9; // Końcowy dzień (9 czerwca)

      for (let i = startDay; i <= endDay; i++) {
        const button = document.createElement('button');
        button.textContent = `${i} Czerwca`;
        button.value = i;
        button.addEventListener('click', () => selectDay(i));
        dniContainer.appendChild(button);
      }
    }

    function selectDay(day) {
      const selectedDate = new Date(2023, 5, day);
      // Tutaj możesz dodać logikę obsługi wybranego dnia
      console.log(`Wybrano ${day} czerwca`);

      // Poniżej znajduje się przykładowa logika wyboru filmu, godziny i sali na podstawie wybranego dnia
      const filmSelect = document.getElementById('film');
      const godzinaSelect = document.getElementById('godzina');
      const salaSelect = document.getElementById('sala');

      // Resetowanie wartości wyboru filmu, godziny i sali
      filmSelect.innerHTML = '<option value="">Wybierz film</option>';
      godzinaSelect.innerHTML = '<option value="">Wybierz godzinę</option>';
      salaSelect.disabled = true;
      salaSelect.value = '';

      // Przykładowe dane repertuarowe
      const repertuar = {
        5: {
          film1: {
            godziny: ['15:00', '18:00'],
            sale: ['sala1', 'sala2']
          },
          film2: {
            godziny: ['17:30'],
            sale: ['sala3']
          }
        },
        6: {
          film3: {
            godziny: ['14:00', '19:30'],
            sale: ['sala1', 'sala3']
          }
        },
        7: {
          film4: {
            godziny: ['20:00'],
            sale: ['sala2']
          }
        }
        // Dodaj dane dla innych dni
      };

      // Sprawdzanie, czy dla wybranego dnia istnieje repertuar
      if (repertuar.hasOwnProperty(day)) {
        const filmy = repertuar[day];

        // Generowanie opcji wyboru filmu
        for (const film in filmy) {
          const option = document.createElement('option');
          option.value = film;
          option.textContent = film;
          filmSelect.appendChild(option);
        }
      }
    }

    // Skrypt obsługujący wybór miejsc

    const seatsContainer = document.getElementById('seat-map');
    const selectedSeatsInput = document.getElementById('selected-seats');
    let selectedSeats = [];

    const seatsData = {
      sala1: [
        ['A1', 'A2', 'A3', 'A4', 'A5', 'A6'],
        ['B1', 'B2', 'B3', 'B4', 'B5', 'B6'],
        ['C1', 'C2', 'C3', 'C4', 'C5', 'C6'],
        ['D1', 'D2', 'D3', 'D4', 'D5', 'D6']
      ],
      sala2: [
        ['A1', 'A2', '', '', 'A5', 'A6'],
        ['B1', 'B2', 'B3', 'B4', 'B5', 'B6'],
        ['C1', 'C2', 'C3', 'C4', 'C5', 'C6'],
        ['D1', 'D2', 'D3', 'D4', 'D5', 'D6']
      ],
      sala3: [
        ['A1', 'A2', 'A3', 'A4', 'A5', 'A6'],
        ['B1', 'B2', 'B3', 'B4', 'B5', 'B6'],
        ['C1', 'C2', 'C3', 'C4', 'C5', 'C6'],
        ['D1', 'D2', 'D3', 'D4', 'D5', 'D6'],
        ['E1', 'E2', 'E3', 'E4', 'E5', 'E6'],
        ['F1', 'F2', 'F3', 'F4', 'F5', 'F6']
      ]
    };

    function generateSeats() {
      seatsContainer.innerHTML = '';

      const salaSelect = document.getElementById('sala');
      const selectedSala = salaSelect.value;
      const salaData = seatsData[selectedSala];

      for (let i = 0; i < salaData.length; i++) {
        const row = salaData[i];
        const rowElement = document.createElement('div');
        rowElement.classList.add('row');

        for (let j = 0; j < row.length; j++) {
          const seat = row[j];
          const seatElement = document.createElement('div');
          seatElement.classList.add('seat');
          seatElement.textContent = seat;
          seatElement.addEventListener('click', () => selectSeat(seat));
          rowElement.appendChild(seatElement);
        }

        seatsContainer.appendChild(rowElement);
      }
    }

    function selectSeat(seat) {
      const seatElement = event.target;

      if (seatElement.classList.contains('selected')) {
        seatElement.classList.remove('selected');
        const index = selectedSeats.indexOf(seat);
        if (index > -1) {
          selectedSeats.splice(index, 1);
        }
      } else {
        seatElement.classList.add('selected');
        selectedSeats.push(seat);
      }

      selectedSeatsInput.value = selectedSeats.join(',');
    }

    generateDayButtons();
  </script>
</body>
</html>
