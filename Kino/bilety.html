<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Wybór biletów</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header>
    <nav>
      <ul>
        <li><a href="index.html">Strona główna</a></li>
        <li><a href="repertuar.html">Repertuar</a></li>
        <li><a href="bilety.html">Bilety</a></li>
        <li><a href="kontakt.html">Kontakt</a></li>
      </ul>
    </nav>
  </header>

  <section id="content">
    <h2>Wybierz film, godzinę i miejsce</h2>
    <form>
      <label for="miesiac">Miesiąc:</label>
      <select id="miesiac">
        <option value="6">Czerwiec</option>
      </select>

      <label for="dni">Dzień:</label>
      <div id="dni">
        <!-- Dynamicznie generowane przyciski dni -->
      </div>

      <label for="film">Film:</label>
      <select id="film" disabled>
        <!-- Dynamicznie generowane opcje filmów -->
      </select>

      <label for="godzina">Godzina:</label>
      <select id="godzina" disabled>
        <!-- Dynamicznie generowane opcje godzin -->
      </select>

      <label for="sala">Sala:</label>
      <select id="sala" disabled>
        <option value="">Wybierz salę</option>
      </select>

      <h3>Wybierz miejsca:</h3>
      <div id="seats-container">
        <!-- Dynamicznie generowane miejsca w sali -->
      </div>

      <label for="selected-seats">Wybrane miejsca:</label>
      <input type="text" id="selected-seats" readonly>

      <button type="submit">Kup bilety</button>
    </form>
  </section>

  <footer>
    &copy; 2023 Kino XYZ. Wszelkie prawa zastrzeżone.
  </footer>

  <script>
    const repertuar = {
      6: {
        5: {
          film1: {
            godziny: ['15:00', '18:00'],
            sale: ['sala1', 'sala2']
          },
          film2: {
            godziny: ['17:30'],
            sale: ['sala3']
          }
        },
        6: {
          film3: {
            godziny: ['14:00', '19:30'],
            sale: ['sala1', 'sala3']
          }
        },
        7: {
          film4: {
            godziny: ['20:00'],
            sale: ['sala2']
          }
        }
      }
      // Dodaj dane dla innych dni
    };

    const seatsData = {
      sala1: [
        ['A1', 'A2', 'A3', 'A4', 'A5', 'A6'],
        ['B1', 'B2', 'B3', 'B4', 'B5', 'B6'],
        ['C1', 'C2', 'C3', 'C4', 'C5', 'C6'],
        ['D1', 'D2', 'D3', 'D4', 'D5', 'D6']
      ],
      sala2: [
        ['A1', 'A2', '', '', 'A5', 'A6'],
        ['B1', 'B2', 'B3', 'B4', 'B5', 'B6'],
        ['C1', 'C2', 'C3', 'C4', 'C5', 'C6'],
        ['D1', 'D2', 'D3', 'D4', 'D5', 'D6']
      ],
      sala3: [
        ['A1', 'A2', 'A3', 'A4', 'A5', 'A6'],
        ['B1', 'B2', 'B3', 'B4', 'B5', 'B6'],
        ['C1', 'C2', 'C3', 'C4', 'C5', 'C6'],
        ['D1', 'D2', 'D3', 'D4', 'D5', 'D6'],
        ['E1', 'E2', 'E3', 'E4', 'E5', 'E6'],
        ['F1', 'F2', 'F3', 'F4', 'F5', 'F6']
      ]
    };

    const miesiacSelect = document.getElementById('miesiac');
    const dniContainer = document.getElementById('dni');
    const filmSelect = document.getElementById('film');
    const godzinaSelect = document.getElementById('godzina');
    const salaSelect = document.getElementById('sala');
    const seatsContainer = document.getElementById('seats-container');
    const selectedSeatsInput = document.getElementById('selected-seats');

    miesiacSelect.addEventListener('change', updateDniOptions);
    dniContainer.addEventListener('change', updateFilmOptions);
    filmSelect.addEventListener('change', updateGodzinaOptions);
    godzinaSelect.addEventListener('change', updateSalaOptions);
    salaSelect.addEventListener('change', generateSeats);

    function updateDniOptions() {
      const selectedMiesiac = miesiacSelect.value;
      dniContainer.innerHTML = '';

      for (let dzien in repertuar[selectedMiesiac]) {
        const dzienButton = document.createElement('button');
        dzienButton.textContent = dzien;
        dzienButton.addEventListener('click', () => selectDzien(dzien));
        dniContainer.appendChild(dzienButton);
      }
    }

    function selectDzien(dzien) {
      const selectedMiesiac = miesiacSelect.value;
      const selectedDzien = dzien;
      const filmy = repertuar[selectedMiesiac][selectedDzien];

      filmSelect.innerHTML = '<option value="">Wybierz film</option>';
      godzinaSelect.innerHTML = '<option value="">Wybierz godzinę</option>';
      salaSelect.innerHTML = '<option value="">Wybierz salę</option>';
      seatsContainer.innerHTML = '';
      selectedSeatsInput.value = '';

      for (let film in filmy) {
        const filmOption = document.createElement('option');
        filmOption.value = film;
        filmOption.textContent = film;
        filmSelect.appendChild(filmOption);
      }

      filmSelect.disabled = false;
    }

    function updateGodzinaOptions() {
      const selectedFilm = filmSelect.value;
      const selectedMiesiac = miesiacSelect.value;
      const selectedDzien = getSelectedDzien();

      godzinaSelect.innerHTML = '<option value="">Wybierz godzinę</option>';
      salaSelect.innerHTML = '<option value="">Wybierz salę</option>';
      seatsContainer.innerHTML = '';
      selectedSeatsInput.value = '';

      const godziny = repertuar[selectedMiesiac][selectedDzien][selectedFilm].godziny;

      for (let godzina of godziny) {
        const godzinaOption = document.createElement('option');
        godzinaOption.value = godzina;
        godzinaOption.textContent = godzina;
        godzinaSelect.appendChild(godzinaOption);
      }

      godzinaSelect.disabled = false;
    }

    function updateSalaOptions() {
      const selectedFilm = filmSelect.value;
      const selectedMiesiac = miesiacSelect.value;
      const selectedDzien = getSelectedDzien();
      const selectedGodzina = godzinaSelect.value;

      salaSelect.innerHTML = '<option value="">Wybierz salę</option>';
      seatsContainer.innerHTML = '';
      selectedSeatsInput.value = '';

      const sale = repertuar[selectedMiesiac][selectedDzien][selectedFilm].sale;

      for (let sala of sale) {
        const salaOption = document.createElement('option');
        salaOption.value = sala;
        salaOption.textContent = sala;
        salaSelect.appendChild(salaOption);
      }

      salaSelect.disabled = false;
    }

    function generateSeats() {
      const selectedSala = salaSelect.value;
      const seats = seatsData[selectedSala];

      seatsContainer.innerHTML = '';

      for (let row of seats) {
        const seatRow = document.createElement('div');

        for (let seat of row) {
          const seatButton = document.createElement('button');
          seatButton.className = 'seat';
          seatButton.textContent = seat;
          seatButton.addEventListener('click', () => selectSeat(seatButton));
          seatRow.appendChild(seatButton);
        }

        seatsContainer.appendChild(seatRow);
      }
    }

    function selectSeat(seatButton) {
      seatButton.classList.toggle('selected');

      const selectedSeats = Array.from(seatsContainer.querySelectorAll('.selected'))
        .map(selectedSeat => selectedSeat.textContent);

      selectedSeatsInput.value = selectedSeats.join(', ');
    }

    function getSelectedDzien() {
      return Array.from(dniContainer.querySelectorAll('button.selected'))[0].textContent;
    }

    updateDniOptions();
  </script>
</body>
</html>
