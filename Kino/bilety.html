<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Kinomax - Bilety</title>
  <link rel="stylesheet" href="style.css">

</head>
<body>
  <header>
    <h1>Kinomax</h1>
    <nav>
      <ul>
        <li><a href="index.html">Strona główna</a></li>
        <li><a href="filmy.html">Filmy</a></li>
        <li><a href="repertuar.html">Repertuar</a></li>
        <li><a href="bilety.html">Bilety</a></li>
        <li><a href="kontakt.html">Kontakt</a></li>
      </ul>
    </nav>
  </header>
  <div id="content">
    <h2>Rezerwacja biletów</h2>

    <form>
      <label for="month">Miesiąc:</label>
      <select id="month">
        <option value="czerwiec" selected>Czerwiec</option>
        <!-- Dodaj opcje dla pozostałych miesięcy tutaj -->
      </select>

      <label for="day">Dzień:</label>
      <select id="day">
        <option value="">WYBIERZ</option>
        <option value="5">5</option>
        <option value="6">6</option>
        <option value="7">7</option>
        <option value="8">8</option>
        <option value="9">9</option>
        <!-- Dodaj opcje dla pozostałych dni tutaj -->
      </select>

      <label for="movie">Film:</label>
      <select id="movie">
        <option value="" disabled selected>Wybierz</option>
        <!-- Dynamicznie generowane opcje filmów -->
      </select>

      <label for="time">Godzina:</label>
      <select id="time">
        <option value="" disabled selected>Wybierz</option>
        <!-- Dynamicznie generowane opcje godzin -->
      </select>

      <label for="hall">Sala:</label>
      <select id="hall">
        <option value="" disabled selected>Wybierz</option>
        <!-- Dynamicznie generowane opcje sal -->
      </select>

      <div id="seats"></div>

      <button type="submit" disabled>Zarezerwuj</button>
    </form>
  </div>

  <footer>
    <p>© 2023 Kinomax. Wszelkie prawa zastrzeżone.</p>
  </footer>

  <script>
    const seatsData = {
      sala1: [
        ['A1', 'A2', 'A3', 'A4', 'A5', 'A6', 'A7', 'A8'],
        ['B1', 'B2', 'B3', 'B4', 'B5', 'B6', 'B7', 'B8'],
        ['C1', 'C2', 'C3', 'C4', 'C5', 'C6', 'C7', 'C8'],
        ['D1', 'D2', 'D3', 'D4', 'D5', 'D6', 'D7', 'D8'],
        ['E1', 'E2', 'E3', 'E4', 'E5', 'E6', 'E7', 'E8'],
        ['F1', 'F2', 'F3', 'F4', 'F5', 'F6', 'F7', 'F8'],
      ],
      sala2: [
        ['A1', 'A2', 'A3', 'A4', 'A5', 'A6', 'A7', 'A8'],
        ['B1', 'B2', 'B3', 'B4', 'B5', 'B6', 'B7', 'B8'],
        ['C1', 'C2', 'C3', 'C4', 'C5', 'C6', 'C7', 'C8'],
        ['D1', 'D2', 'D3', 'D4', 'D5', 'D6', 'D7', 'D8'],
        ['E1', 'E2', 'E3', 'E4', 'E5', 'E6', 'E7', 'E8'],
        ['F1', 'F2', 'F3', 'F4', 'F5', 'F6', 'F7', 'F8'],
      ],
    };

    function populateSelectOptions(selectId, options) {
      const select = document.getElementById(selectId);
      select.innerHTML = '';

      options.forEach((option) => {
        const optionElement = document.createElement('option');
        optionElement.value = option;
        optionElement.textContent = option;
        select.appendChild(optionElement);
      });
    }

    function isSeatBooked(hall, seat) {
      // Symulacja sprawdzania, czy miejsce jest zarezerwowane
      // Tutaj można dodać logikę weryfikującą dostępność miejsc na podstawie bazy danych lub innego źródła danych
      return false;
    }

    function toggleSeatSelection(hall, seat) {
      const seatElement = document.getElementById(`${hall}-${seat}`);
      seatElement.classList.toggle('selected');
      updateSubmitButtonState();
    }

    function updateSeatSelection() {
      const hall = document.getElementById('hall').value;
      const seats = seatsData[hall];

      const seatsContainer = document.getElementById('seats');
      seatsContainer.innerHTML = '';

      seats.forEach((row) => {
        const rowElement = document.createElement('div');
        rowElement.classList.add('seat-row');

        row.forEach((seat) => {
          const seatElement = document.createElement('div');
          seatElement.classList.add('seat');
          seatElement.id = `${hall}-${seat}`;
          seatElement.textContent = seat;

          // Sprawdzamy, czy dane miejsce jest już zarezerwowane
          if (isSeatBooked(hall, seat)) {
            seatElement.classList.add('booked');
          } else {
            seatElement.addEventListener('click', () => toggleSeatSelection(hall, seat));
          }

          rowElement.appendChild(seatElement);
        });

        seatsContainer.appendChild(rowElement);
      });
    }

    function updateSubmitButtonState() {
      const selectedSeats = document.querySelectorAll('.seat.selected');
      const submitButton = document.querySelector('button[type="submit"]');
      submitButton.disabled = selectedSeats.length === 0;
    }

    document.getElementById('hall').addEventListener('change', updateSeatSelection);

    updateSeatSelection();
    
    // Znacznik div przechowujący aktualnie wybrane miejsca
const selectedSeatsContainer = document.getElementById('selected-seats');

function toggleSeatSelection(hall, seat) {
  const seatKey = `${hall}-${seat}`;
  const seatElement = document.querySelector(`.seat[data-seat="${seatKey}"]`);

  if (selectedSeats.has(seatKey)) {
    selectedSeats.delete(seatKey);
    seatElement.classList.remove('selected');
  } else {
    selectedSeats.add(seatKey);
    seatElement.classList.add('selected');
  }

  updateSubmitButtonState();
  updateSelectedSeats();
}

function updateSelectedSeats() {
  selectedSeatsContainer.innerHTML = '';

  if (selectedSeats.size === 0) {
    const placeholder = document.createElement('p');
    placeholder.textContent = 'Wybierz miejsca';
    selectedSeatsContainer.appendChild(placeholder);
  } else {
    selectedSeats.forEach((seat) => {
      const seatElement = document.createElement('span');
      seatElement.textContent = seat;
      selectedSeatsContainer.appendChild(seatElement);
    });
  }
}

// Funkcja do wyśrodkowania miejsc w kontenerze
function centerSeats() {
  const seatRows = document.querySelectorAll('.seat-row');

  seatRows.forEach((row) => {
    const seatElements = row.querySelectorAll('.seat');
    const rowWidth = row.offsetWidth;

    // Obliczanie szerokości całego rzędu miejsc
    let seatsWidth = 0;
    seatElements.forEach((seatElement) => {
      seatsWidth += seatElement.offsetWidth;
    });

    // Obliczanie marginesu lewego dla wycentrowania
    const margin = (rowWidth - seatsWidth) / 2;

    // Ustawienie marginesu dla każdego miejsca w rzędzie
    seatElements.forEach((seatElement) => {
      seatElement.style.marginLeft = `${margin}px`;
    });
  });
}

// Funkcja wywoływana po każdej aktualizacji miejsc
function updateSeatSelection() {
  const hall = document.getElementById('hall').value;
  const seats = seatsData[hall];

  const seatsContainer = document.getElementById('seats');
  seatsContainer.innerHTML = '';

  seats.forEach((row) => {
    const rowElement = document.createElement('div');
    rowElement.classList.add('seat-row');

    row.forEach((seat) => {
      const seatElement = document.createElement('div');
      seatElement.classList.add('seat');
      seatElement.textContent = seat;

      // Sprawdzamy, czy dane miejsce jest już zarezerwowane
      if (isSeatBooked(hall, seat)) {
        seatElement.classList.add('booked');
      } else {
        seatElement.addEventListener('click', () => toggleSeatSelection(hall, seat));
      }

      rowElement.appendChild(seatElement);
    });

    seatsContainer.appendChild(rowElement);
  });

  centerSeats();
  updateSelectedSeats();
}

// Inicjalizacja
window.addEventListener('resize', centerSeats);

// Dodaj te linie kodu na koniec skryptu

updateSelectedSeats();
centerSeats();
  </script>
</div>
</body>
</html>
