<!DOCTYPE html>
<html>
<head>
  <title>Rezerwacja biletów</title>
  <style>
    .selected {
      background-color: yellow;
    }
  </style>
</head>
<body>
  <label for="miesiac">Miesiąc:</label>
  <select id="miesiac">
    <option value="Czerwiec">Styczeń</option>
  </select>
  <br>
  <label for="dni">Dzień:</label>
  <div id="dni">
    <button value="5">5</button>
    <button value="6">6</button>
    <button value="7">7</button>
  </div>
  <br>
  <label for="film">Film:</label>
  <select id="film" disabled>
    <option value="">Wybierz film</option>
  </select>
  <br>
  <label for="godzina">Godzina:</label>
  <select id="godzina" disabled>
    <option value="">Wybierz godzinę</option>
  </select>
  <br>
  <label for="sala">Sala:</label>
  <select id="sala" disabled>
    <option value="">Wybierz salę</option>
  </select>
  <br>
  <div id="seats-container"></div>
  <input type="text" id="selected-seats" readonly>

  <script>
    const repertuar = {
      Czerwiec: {
        5: {
          film1: {
            godziny: ['12:00', '15:00', '18:00'],
            sale: ['sala1', 'sala2']
          },
          film2: {
            godziny: ['13:00', '16:00', '19:00'],
            sale: ['sala1', 'sala2']
          }
        },
        6: {
          film1: {
            godziny: ['14:00', '17:00', '20:00'],
            sale: ['sala1', 'sala3']
          },
          film2: {
            godziny: ['13:30', '16:30', '19:30'],
            sale: ['sala1', 'sala3']
          }
        },
        7: {
          film1: {
            godziny: ['12:30', '15:30', '18:30'],
            sale: ['sala2', 'sala3']
          },
          film2: {
            godziny: ['14:30', '17:30', '20:30'],
            sale: ['sala2', 'sala3']
          }
        }
    };

    const seatsData = {
      sala1: [
        ['A1', 'A2', 'A3', '', '', 'A6', 'A7', 'A8'],
        ['B1', 'B2', 'B3', '', '', 'B6', 'B7', 'B8'],
        ['C1', 'C2', '', '', '', '', 'C7', 'C8'],
        ['', '', '', '', '', '', '', ''],
        ['E1', 'E2', '', '', '', '', 'E7', 'E8'],
        ['F1', 'F2', 'F3', '', '', 'F6', 'F7', 'F8']
      ],
      sala2: [
        ['A1', 'A2', 'A3', '', '', 'A6', 'A7', 'A8'],
        ['B1', 'B2', 'B3', '', '', 'B6', 'B7', 'B8'],
        ['', '', '', '', '', '', '', ''],
        ['', '', '', '', '', '', '', ''],
        ['E1', 'E2', '', '', '', '', 'E7', 'E8'],
        ['F1', 'F2', 'F3', '', '', 'F6', 'F7', 'F8']
      ],
      sala3: [
        ['', '', '', '', '', '', '', ''],
        ['', '', '', '', '', '', '', ''],
        ['C1', 'C2', '', '', '', '', 'C7', 'C8'],
        ['', '', '', '', '', '', '', ''],
        ['E1', 'E2', '', '', '', '', 'E7', 'E8'],
        ['F1', 'F2', 'F3', '', '', 'F6', 'F7', 'F8']
      ]
    };

    const miesiacSelect = document.getElementById('miesiac');
    const dniContainer = document.getElementById('dni');
    const filmSelect = document.getElementById('film');
    const godzinaSelect = document.getElementById('godzina');
    const salaSelect = document.getElementById('sala');
    const seatsContainer = document.getElementById('seats-container');
    const selectedSeatsInput = document.getElementById('selected-seats');

    dniContainer.addEventListener('click', (event) => {
      if (event.target.tagName === 'BUTTON') {
        const selectedButton = event.target;
        const selectedDzien = selectedButton.textContent;

        // Remove selected class from all buttons
        const buttons = dniContainer.querySelectorAll('button');
        buttons.forEach(button => button.classList.remove('selected'));

        // Add selected class to the clicked button
        selectedButton.classList.add('selected');

        updateFilmOptions();
      }
    });

    function updateFilmOptions() {
      const selectedMiesiac = miesiacSelect.value;
      const selectedDzien = getSelectedDzien();

      filmSelect.innerHTML = '<option value="">Wybierz film</option>';
      godzinaSelect.innerHTML = '<option value="">Wybierz godzinę</option>';
      salaSelect.innerHTML = '<option value="">Wybierz salę</option>';
      seatsContainer.innerHTML = '';
      selectedSeatsInput.value = '';

      const filmy = repertuar[selectedMiesiac][selectedDzien];

      for (let film in filmy) {
        const filmOption = document.createElement('option');
        filmOption.value = film;
        filmOption.textContent = film;
        filmSelect.appendChild(filmOption);
      }

      filmSelect.disabled = false;
    }

    function updateGodzinaOptions() {
      const selectedFilm = filmSelect.value;
      const selectedMiesiac = miesiacSelect.value;
      const selectedDzien = getSelectedDzien();

      godzinaSelect.innerHTML = '<option value="">Wybierz godzinę</option>';
      salaSelect.innerHTML = '<option value="">Wybierz salę</option>';
      seatsContainer.innerHTML = '';
      selectedSeatsInput.value = '';

      const godziny = repertuar[selectedMiesiac][selectedDzien][selectedFilm].godziny;

      for (let godzina of godziny) {
        const godzinaOption = document.createElement('option');
        godzinaOption.value = godzina;
        godzinaOption.textContent = godzina;
        godzinaSelect.appendChild(godzinaOption);
      }

      godzinaSelect.disabled = false;
    }

    function updateSalaOptions() {
      const selectedFilm = filmSelect.value;
      const selectedMiesiac = miesiacSelect.value;
      const selectedDzien = getSelectedDzien();
      const selectedGodzina = godzinaSelect.value;

      salaSelect.innerHTML = '<option value="">Wybierz salę</option>';
      seatsContainer.innerHTML = '';
      selectedSeatsInput.value = '';

      const sale = repertuar[selectedMiesiac][selectedDzien][selectedFilm].sale;

      for (let sala of sale) {
        const salaOption = document.createElement('option');
        salaOption.value = sala;
        salaOption.textContent = sala;
        salaSelect.appendChild(salaOption);
      }

      salaSelect.disabled = false;
    }

    function updateSeats() {
      const selectedSala = salaSelect.value;
      const seats = seatsData[selectedSala];

      seatsContainer.innerHTML = '';

      for (let row of seats) {
        const rowDiv = document.createElement('div');
        rowDiv.classList.add('seat-row');

        for (let seat of row) {
          const seatButton = document.createElement('button');
          seatButton.classList.add('seat');
          seatButton.textContent = seat;
          seatButton.addEventListener('click', () => {
            seatButton.classList.toggle('selected');
            updateSelectedSeats();
          });
          rowDiv.appendChild(seatButton);
        }

        seatsContainer.appendChild(rowDiv);
      }
    }

    function updateSelectedSeats() {
      const selectedSeats = seatsContainer.querySelectorAll('.seat.selected');
      const selectedSeatCodes = Array.from(selectedSeats).map(seat => seat.textContent);
      selectedSeatsInput.value = selectedSeatCodes.join(', ');
    }

    function getSelectedDzien() {
      const selectedButton = dniContainer.querySelector('.selected');
      if (selectedButton) {
        return selectedButton.textContent;
      }
      return null;
    }

    miesiacSelect.addEventListener('change', () => {
      filmSelect.disabled = true;
      godzinaSelect.disabled = true;
      salaSelect.disabled = true;

      dniContainer.innerHTML = '';
      filmSelect.innerHTML = '<option value="">Wybierz film</option>';
      godzinaSelect.innerHTML = '<option value="">Wybierz godzinę</option>';
      salaSelect.innerHTML = '<option value="">Wybierz salę</option>';
      seatsContainer.innerHTML = '';
      selectedSeatsInput.value = '';

      const selectedMiesiac = miesiacSelect.value;
      const dni = Object.keys(repertuar[selectedMiesiac]);

      for (let dzien of dni) {
        const dzienButton = document.createElement('button');
        dzienButton.textContent = dzien;
        dniContainer.appendChild(dzienButton);
      }
    });

    filmSelect.addEventListener('change', () => {
      godzinaSelect.disabled = true;
      salaSelect.disabled = true;

      godzinaSelect.innerHTML = '<option value="">Wybierz godzinę</option>';
      salaSelect.innerHTML = '<option value="">Wybierz salę</option>';
      seatsContainer.innerHTML = '';
      selectedSeatsInput.value = '';

      updateGodzinaOptions();
    });

    godzinaSelect.addEventListener('change', () => {
      salaSelect.disabled = true;

      salaSelect.innerHTML = '<option value="">Wybierz salę</option>';
      seatsContainer.innerHTML = '';
      selectedSeatsInput.value = '';

      updateSalaOptions();
    });

    salaSelect.addEventListener('change', () => {
      updateSeats();
      updateSelectedSeats();
    });
  </script>
</body>
</html>
