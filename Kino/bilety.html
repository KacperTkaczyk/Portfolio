<!DOCTYPE html>
<html>
<head>
  <title>Kinomax - Rezerwacja biletów</title>
  <link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
  <header>
    <h1>Kinomax - Rezerwacja biletów</h1>
  </header>

  <main>
    <form id="booking-form">
      <div class="form-group">
        <label for="month">Miesiąc:</label>
        <select id="month"></select>
      </div>

      <div class="form-group">
        <label for="day">Dzień:</label>
        <select id="day"></select>
      </div>

      <div class="form-group">
        <label for="movie">Film:</label>
        <select id="movie"></select>
      </div>

      <div class="form-group">
        <label for="time">Godzina:</label>
        <select id="time"></select>
      </div>

      <div class="form-group">
        <label for="hall">Sala:</label>
        <select id="hall"></select>
      </div>

      <div id="seats">
        <p>Wybierz film, godzinę i salę, aby zobaczyć dostępne miejsca.</p>
      </div>

      <button type="submit" disabled>Zarezerwuj</button>
    </form>
  </main>

  <footer>
    <p>© 2023 Kinomax. Wszelkie prawa zastrzeżone.</p>
  </footer>

  <script>
    const moviesData = {
      'czerwiec': {
        '5': {
          'Sala 1': {
            '12:00': ['Film 1'],
            '15:00': ['Film 2'],
          },
          'Sala 2': {
            '12:00': ['Film 3'],
            '15:00': ['Film 4'],
          },
        },
        '6': {
          'Sala 1': {
            '14:00': ['Film 5'],
            '17:00': ['Film 6'],
          },
          'Sala 3': {
            '14:00': ['Film 7'],
            '17:00': ['Film 8'],
          },
        },
      },
      // Dodaj informacje dla pozostałych dni i sal tutaj
    };

    const seatsData = {
      'Sala 1': [
        ['A1', 'A2', 'A3', 'A4', 'A5'],
        ['B1', 'B2', 'B3', 'B4', 'B5'],
        ['C1', 'C2', 'C3', 'C4', 'C5'],
        ['D1', 'D2', 'D3', 'D4', 'D5'],
        ['E1', 'E2', 'E3', 'E4', 'E5'],
      ],
      'Sala 2': [
        ['F1', 'F2', 'F3', 'F4', 'F5'],
        ['G1', 'G2', 'G3', 'G4', 'G5'],
        ['H1', 'H2', 'H3', 'H4', 'H5'],
        ['I1', 'I2', 'I3', 'I4', 'I5'],
        ['J1', 'J2', 'J3', 'J4', 'J5'],
      ],
      'Sala 3': [
        ['K1', 'K2', 'K3', 'K4', 'K5'],
        ['L1', 'L2', 'L3', 'L4', 'L5'],
        ['M1', 'M2', 'M3', 'M4', 'M5'],
        ['N1', 'N2', 'N3', 'N4', 'N5'],
        ['O1', 'O2', 'O3', 'O4', 'O5'],
      ],
      // Dodaj informacje dla pozostałych sal tutaj
    };

    const monthSelect = document.getElementById('month');
    const daySelect = document.getElementById('day');
    const movieSelect = document.getElementById('movie');
    const timeSelect = document.getElementById('time');
    const hallSelect = document.getElementById('hall');
    const seatsContainer = document.getElementById('seats');
    const submitButton = document.querySelector('button[type="submit"]');

    // Generowanie opcji dla elementu <select>
    function generateOptions(selectElement, options) {
      selectElement.innerHTML = '';

      options.forEach((option) => {
        const optionElement = document.createElement('option');
        optionElement.value = option;
        optionElement.textContent = option;
        selectElement.appendChild(optionElement);
      });
    }

    // Generowanie miejsc dla wybranej sali
    function generateSeats(seats) {
      seatsContainer.innerHTML = '';

      seats.forEach((row) => {
        const rowContainer = document.createElement('div');
        rowContainer.classList.add('row-container');

        row.forEach((seat) => {
          const seatContainer = document.createElement('div');
          seatContainer.classList.add('seat-container');
          seatContainer.textContent = seat;
          rowContainer.appendChild(seatContainer);
        });

        seatsContainer.appendChild(rowContainer);
      });

      // Dodanie obsługi zdarzeń kliknięcia dla miejsc
      const seatContainers = document.querySelectorAll('.seat-container');
      seatContainers.forEach((seatContainer) => {
        seatContainer.addEventListener('click', () => {
          seatContainer.classList.toggle('selected');
          checkReservationValidity();
        });
      });
    }

    // Funkcja sprawdzająca poprawność wyboru miejsc i odblokowująca przycisk rezerwacji
    function checkReservationValidity() {
      const selectedSeats = document.querySelectorAll('.seat-container.selected');

      if (selectedSeats.length > 0) {
        submitButton.disabled = false;
      } else {
        submitButton.disabled = true;
      }
    }

    // Funkcja wywoływana przy zmianie miesiąca
    function onMonthChange() {
      const selectedMonth = monthSelect.value;
      const days = Object.keys(moviesData[selectedMonth]);
      generateOptions(daySelect, days);
    }

    // Funkcja wywoływana przy zmianie dnia
    function onDayChange() {
      const selectedMonth = monthSelect.value;
      const selectedDay = daySelect.value;
      const movies = Object.keys(moviesData[selectedMonth][selectedDay]);
      generateOptions(movieSelect, movies);
    }

    // Funkcja wywoływana przy zmianie filmu
    function onMovieChange() {
      const selectedMonth = monthSelect.value;
      const selectedDay = daySelect.value;
      const selectedMovie = movieSelect.value;
      const times = Object.keys(moviesData[selectedMonth][selectedDay][selectedMovie]);
      generateOptions(timeSelect, times);
    }

    // Funkcja wywoływana przy zmianie godziny
    function onTimeChange() {
      const selectedMonth = monthSelect.value;
      const selectedDay = daySelect.value;
      const selectedMovie = movieSelect.value;
      const selectedTime = timeSelect.value;
      const halls = Object.keys(moviesData[selectedMonth][selectedDay][selectedMovie][selectedTime]);
      generateOptions(hallSelect, halls);
    }

    // Funkcja wywoływana przy zmianie sali
    function onHallChange() {
      const selectedMonth = monthSelect.value;
      const selectedDay = daySelect.value;
      const selectedMovie = movieSelect.value;
      const selectedTime = timeSelect.value;
      const selectedHall = hallSelect.value;
      const seats = seatsData[selectedHall];
      generateSeats(seats);
      checkReservationValidity();
    }

    // Dodanie obsługi zdarzeń zmiany dla wszystkich elementów <select>
    monthSelect.addEventListener('change', onMonthChange);
    daySelect.addEventListener('change', onDayChange);
    movieSelect.addEventListener('change', onMovieChange);
    timeSelect.addEventListener('change', onTimeChange);
    hallSelect.addEventListener('change', onHallChange);

    // Inicjalizacja
    const months = Object.keys(moviesData);
    generateOptions(monthSelect, months);

    const initialMonth = months[0];
    const initialDays = Object.keys(moviesData[initialMonth]);
    generateOptions(daySelect, initialDays);

    const initialDay = initialDays[0];
    const initialMovies = Object.keys(moviesData[initialMonth][initialDay]);
    generateOptions(movieSelect, initialMovies);

    const initialMovie = initialMovies[0];
    const initialTimes = Object.keys(moviesData[initialMonth][initialDay][initialMovie]);
    generateOptions(timeSelect, initialTimes);

    const initialTime = initialTimes[0];
    const initialHalls = Object.keys(moviesData[initialMonth][initialDay][initialMovie][initialTime]);
    generateOptions(hallSelect, initialHalls);

    const initialHall = initialHalls[0];
    const initialSeats = seatsData[initialHall];
    generateSeats(initialSeats);
  </script>
</body>
</html>
