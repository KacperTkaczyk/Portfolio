<!DOCTYPE html>
<html>
<head>
  <title>Gra z punktacją</title>
  <style>
    #square {
      width: 100px;
      height: 100px;
      background-color: red;
      margin: 50px auto;
      cursor: pointer;
    }
    #score {
      text-align: center;
      font-size: 24px;
      margin-top: 20px;
    }
    #login-form {
      text-align: center;
      margin-top: 50px;
    }
  </style>
</head>
<body>
  <h1>Gra z punktacją</h1>
  <div id="square"></div>
  <div id="score">Punkty: <span id="points">0</span></div>

  <div id="login-form">
    <h2>Zaloguj się lub utwórz konto</h2>
    <label for="username">Nazwa użytkownika:</label>
    <input type="text" id="username" required><br>
    <label for="password">Hasło:</label>
    <input type="password" id="password" required><br>
    <button id="login-button">Zaloguj się</button>
    <button id="signup-button">Utwórz konto</button>
  </div>

  <script>
    var square = document.getElementById("square");
    var pointsDisplay = document.getElementById("points");
    var points = 0;

    square.addEventListener("click", function() {
      points++;
      pointsDisplay.textContent = points;
    });

    var loginForm = document.getElementById("login-form");
    var loginButton = document.getElementById("login-button");
    var signupButton = document.getElementById("signup-button");

    loginButton.addEventListener("click", function() {
      var username = document.getElementById("username").value;
      var password = document.getElementById("password").value;

      // Wywołanie funkcji logowania w PHP
      login(username, password);
    });

    signupButton.addEventListener("click", function() {
      var username = document.getElementById("username").value;
      var password = document.getElementById("password").value;

      // Wywołanie funkcji rejestracji w PHP
      signup(username, password);
    });

    function login(username, password) {
      // Wywołanie skryptu PHP, który obsłuży dane logowania
      fetch("Gra/login.php", {
        method: "POST",
        body: JSON.stringify({ username: username, password: password })
      })
        .then(response => response.json())
        .then(data => {
          if (data.success) {
            showGame();
          } else {
            alert("Nieprawidłowa nazwa użytkownika lub hasło");
          }
        })
        .catch(error => {
          console.error("Błąd logowania:", error);
        });
    }

    function signup(username, password) {
      // Wywołanie skryptu PHP, który obsłuży proces rejestracji
      fetch("Gra/signup.php", {
        method: "POST",
        body: JSON.stringify({ username: username, password: password })
      })
        .then(response => response.json())
        .then(data => {
          if (data.success) {
            alert("Konto zostało utworzone. Możesz się teraz zalogować.");
          } else {
            alert("Nieprawidłowe dane rejestracji");
          }
        })
        .catch(error => {
          console.error("Błąd rejestracji:", error);
        });
    }

    function showGame() {
      loginForm.style.display = "none";
      square.style.display = "block";
      pointsDisplay.textContent = points;
    }
  </script>
</body>
</html>
